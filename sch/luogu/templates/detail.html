{% extends "base.html" %}
{% block jsUp %}
<!--引入样式文件-->
<link rel="stylesheet" href="../static/makeNews/examples/css/style.css"/>
<link rel="stylesheet" href="../static/makeNews/css/editormd.preview.css"/>

<!--引入js文件-->
<script src="../static/makeNews/examples/js/jquery.min.js"></script>
<script src="../static/makeNews/lib/marked.min.js"></script>
<script src="../static/makeNews/lib/prettify.min.js"></script>
<script src="../static/makeNews/lib/raphael.min.js"></script>
<script src="../static/makeNews/lib/underscore.min.js"></script>
<script src="../static/makeNews/lib/sequence-diagram.min.js"></script>
<script src="../static/makeNews/lib/flowchart.min.js"></script>
<script src="../static/makeNews/lib/jquery.flowchart.min.js"></script>
<script src="../static/makeNews/editormd.js"></script>

{% endblock %}
{% block main%}
<div style="background-color: rgba(0, 0, 0, .75); height: 20%">
    <div style="height: 5%"></div>
    <div style="margin-left: 20px;" align="left">
<!--        <p align="left">-->
        <h5 style="color: white;">题目详情</h5>
<!--        </p>-->
<!--        <div style="width: fit-content;"></div>-->
    </div>

    <div style="height: 5%"></div>
    <div style="float: left; margin-left: 20px"><h3 style="color: white;">{{ question.no }}</h3></div>
    <div style="float: left; margin-left: 20px"><h3 style="color: white">{{ question.title }}</h3></div>
</div>
<div style="margin-bottom: 32px;">
    <div style="margin: 20px 51.729px 0px;">

        <div style="display: block;box-sizing: border-box;overflow: hidden; ">
            <div style="padding: 0px 10px;overflow: hidden;">
                <div style="margin: 0px 0px 15px;padding: 16px;background-color: rgba(255,255,255,.7);overflow: hidden;">

                    <div style="width: 100%; height: 100%">
                        <div style="height: 200px">
                            <div style="float: left; margin-left: 20px"><h3 style="color: black">题目描述</h3></div>

                            <div id="question" onmousemove="mdToHml();" style="height: 500px;">
                                <textarea style="display:none; "></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
    <div style="margin: 20px 51.729px 0px;">
        <div style="display: block;box-sizing: border-box;overflow: hidden; ">
            <div style="padding: 0px 10px;overflow: hidden;">
                <div style="margin: 0px 0px 15px;padding: 16px;background-color: rgba(255,255,255,.7);overflow: hidden;">

                    <div style="width: 100%; height: 100%">
                        <div style="height: 200px">
                            <div style="float: left; margin-left: 20px"><h3 style="color: black">参考答案</h3></div>

                            <div id="answer" style="height: 150px;">
                                <br>
                                <br>
                                <button onclick="mdToHmlA();" style="height: 100%; width: 100%">点击查看答案</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
    <div style="background-color: white">
        <div id="abc" style="color: white">{{ question.question }}</div>
        <div id="def" style="color: white">{{ question.answer }}</div>
    </div>
    <!--</div>-->
    {% endblock %}

    {% block js %}

    <script type="text/javascript">

        //markDown转HTMl的方法
        function mdToHml() {
            //先对容器初始化，在需要展示的容器中创建textarea隐藏标签，
            // $("#question-editor").html('<div>傻逼</div>>')
            $("#question").html('<textarea id="appendTest1" style="display:none;">你</textarea>');
            // <textarea style="display:none; "></textarea>

            // var content = $("#abc").val();//获取需要转换的内容
            // var content = $("#abc").innerHTML;//获取需要转换的内容
            var content = document.getElementById("abc").innerHTML;//获取需要转换的内容
            $("#appendTest1").val(content);//将需要转换的内容加到转换后展示容器的textarea隐藏标签中
            // alert(content);
            // console.log(content);
            //转换开始,第一个参数是上面的div的id
            editormd.markdownToHTML("question", {
                htmlDecode: "style,script,iframe", //可以过滤标签解码
                emoji: true,
                taskList: true,
                tex: true,               // 默认不解析
                flowChart: true,         // 默认不解析
                sequenceDiagram: true,  // 默认不解析
            });
        }

        function mdToHmlA() {
            //先对容器初始化，在需要展示的容器中创建textarea隐藏标签，
            $("#answer").html('<textarea id="appendTest2" style="display:none;">你</textarea>');

            var content = document.getElementById("def").innerHTML;//获取需要转换的内容
            $("#appendTest2").val(content);//将需要转换的内容加到转换后展示容器的textarea隐藏标签中

            editormd.markdownToHTML("answer", {
                htmlDecode: "style,script,iframe", //可以过滤标签解码
                emoji: true,
                taskList: true,
                tex: true,               // 默认不解析
                flowChart: true,         // 默认不解析
                sequenceDiagram: true,  // 默认不解析
            });
        }
    </script>
    <script src="https://cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script>
    <!--<script src="../static/makeNews/editormd.min.js"></script>-->
    <!--<link rel="stylesheet" href="../static/makeNews/css/editormd.css"/>-->
    {% endblock %}